"use strict";window.tsfCanonical=function(){function a(a){return p.get(a)}function b(a,b){return b?q[a]?.[b]:q[a]}function c(a,b,c){if(q[a][b]!==c)switch(q[a][b]=c,b){case"allowReferenceChange":case"showUrlPlaceholder":case"preferredScheme":case"urlStructure":case"urlDataParts":default:g(a)}}function d(a){let c="",d=a.target.id;if(b(d,"showUrlPlaceholder"))if(o&&l&&b(d,"allowReferenceChange")){const a=b(d,"urlStructure"),e=b(d,"urlDataParts"),f=b(d,"preferredScheme"),g=l?[]:n.queryReplace;let h=a;n.code.forEach((a,b)=>{if(!h.includes(a))return;let c=null;a in e&&(c=e[a]),h=null===c?h.replace(a,""):h.replace(a,(g[b]??"")+c)}),h=h.replace(/\/{2,}/g,"/").replace(/\s+/g,"-");const i=URL.parse(h,m);i.protocol=`${f}:`,c=i.href}else c=b(d,"defaultCanonical");a.target.placeholder=c}function e(b){b?a(b)?.dispatchEvent(new Event("input")):p.forEach(a=>a.id&&e(a.id))}function f(a){d(a)}function g(a){a in r&&clearTimeout(r[a]),r[a]=setTimeout(()=>e(a),1e3/60)}function h(a){if("tsfAys"in window){let b=tsfAys.areSettingsChanged();e(a),!b&&tsfAys.areSettingsChanged()&&tsfAys.reset()}else e(a)}function i(a){a in s&&clearTimeout(s[a]),s[a]=setTimeout(()=>h(a),1e3/60)}function j(a){!a instanceof Element||(a.addEventListener("input",f),i(a.id))}const k=tsfCanonicalL10n,l=k.params.usingPermalinks,m=tsf.stripTags(k.params.rootUrl),n=k.params.rewrite,o=k.params.allowCanonicalURLNotationTool,p=new Map,q={};let r={},s={};return Object.assign({setInputElement:function(b){return p.set(b.id,b),q[b.id]={allowReferenceChange:!0,defaultCanonical:"",showUrlPlaceholder:!0,preferredScheme:"",urlStructure:"",urlDataParts:{}},j(b),a(b.id)},getInputElement:a,getStateOf:b,updateStateOf:c,updateStateAll:function(a,b,d){d=Array.isArray(d)?d:[d],p.forEach(e=>{d.includes(e.id)||c(e.id,a,b)})},structIncludes:function(a,c){const d=b(a,"urlStructure");return Array.isArray(c)?c.some(a=>d.includes(a)):d.includes(c)},sanitizeSlug:function(a){if("string"!=typeof a||!a.length)return a;const b={in:"\x80\x83\x8A\x8E\x9A\x9E\x9F\xA2\xA5\xB5\xC0\xC1\xC2\xC3\xC4\xC5\xC7\xC8\xC9\xCA\xCB\xCC\xCD\xCE\xCF\xD1\xD2\xD3\xD4\xD5\xD6\xD8\xD9\xDA\xDB\xDC\xDD\xE0\xE1\xE2\xE3\xE4\xE5\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF1\xF2\xF3\xF4\xF5\xF6\xF8\xF9\xFA\xFB\xFC\xFD\xFF",out:"EfSZszYcYuAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy"};a=a.replace(/./g,a=>{const c=b.in.indexOf(a);return-1===c?a:b.out[c]});const c={in:["\x8C","\x9C","\xC6","\xD0","\xDE","\xDF","\xE6","\xF0","\xFE"],out:["OE","oe","AE","DH","TH","ss","ae","dh","th"]};return c.in.forEach((b,d)=>{a=a.replace(new RegExp(b,"g"),c.out[d])}),a=a.replace(/<\/?[^>]+(>|$)/g,"").replace(/%([a-fA-F0-9][a-fA-F0-9])/g,"---$1---").replace(/%|"/g,"").replace(/---([a-fA-F0-9][a-fA-F0-9])---/g,"%$1").replace(/\s+/g,"-").toLowerCase(),encodeURIComponent(a).replace(/%c2%a0|%e2%80%93|%e2%80%94|&nbsp;|&#160;|&ndash;|&#8211;|&mdash;|&#8212;|\//g,"-").replace(/%c3%97/g,"x").replace(/%c2%ad|%c2%a1|%c2%bf|%c2%ab|%c2%bb|%e2%80%b9|%e2%80%ba|%e2%80%98|%e2%80%99|%e2%80%9c|%e2%80%9d|%e2%80%9a|%e2%80%9b|%e2%80%9e|%e2%80%9f|%e2%80%a2|%c2%a9|%c2%ae|%c2%b0|%e2%80%a6|%e2%84%a2|%c2%b4|%cb%8a|%cc%81|%cd%81|%cc%80|%cc%84|%cc%8c|%e2%80%8b|%e2%80%8c|%e2%80%8d|%e2%80%8e|%e2%80%8f|%e2%80%aa|%e2%80%ab|%e2%80%ac|%e2%80%ad|%e2%80%ae|%ef%bb%bf|%ef%bf%bc/g,"").replace(/%e2%80%80|%e2%80%81|%e2%80%82|%e2%80%83|%e2%80%84|%e2%80%85|%e2%80%86|%e2%80%87|%e2%80%88|%e2%80%89|%e2%80%8a|%e2%80%a8|%e2%80%a9|%e2%80%af/g,"-").replace(/&.+?;/g,"").replace(/\./g,"-").replace(/[^%a-z0-9 _-]+/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"")},triggerInput:e,enqueueTriggerInput:g,triggerUnregisteredInput:h,enqueueTriggerUnregisteredInput:i},{l10n:k,usingPermalinks:l,rootUrl:m,rewrite:n})}();
