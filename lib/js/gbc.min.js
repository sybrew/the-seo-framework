window.tsfGBC=(n=>{let t=wp.data.select("core/editor"),e=wp.data.select("core/edit-post"),s=new Map;function d(e){return t.getEditedPostAttribute(e)}function o(){let n=new Map(s);s.set("title",d("title")).set("link",t.getPermalink()).set("slug",d("slug")).set("parent",d("parent")).set("date",d("date")).set("author",d("author")).set("content",d("content")).set("excerpt",d("excerpt")).set("visibility",t.getEditedPostVisibility()),s.forEach((e,t)=>{e!==n.get(t)&&b(t)})}let a=!1,u="";function i(){a?(t.didPostSaveRequestSucceed()?(v(),c().cancel(),r):c)():t.isSavingPost()&&(u=t.isPreviewingPost()?(a=!0,"preview"):t.isAutosavingPost()?(a=!0,"autosave"):(a=!0,"save"))}let c=tsfUtils.debounce(r,7e3);function r(){a=!1}let v=tsfUtils.debounce(function(){if(t.isPostSavingLocked())++p<3?v():(v().cancel(),p=0);else{p=0;let e=!t.hasChangedContent();switch(u){case"preview":document.dispatchEvent(new CustomEvent("tsf-gutenberg-onpreview"));break;case"autosave":document.dispatchEvent(new CustomEvent("tsf-gutenberg-onautosave"));break;case"save":e=!0}e&&(document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave")),document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave-completed"))),document.dispatchEvent(new CustomEvent("tsf-gutenberg-saved-document",{detail:{savedType:u}})),u=""}},500),p=0,g={opened:!1};function l(){e.isEditorSidebarOpened()?g.opened||(g.opened=!0,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-opened"))):g.opened&&(g.opened=!1,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-closed")))}function b(e){var t=s.get(e);document.dispatchEvent(new CustomEvent("tsf-updated-block-editor",{detail:{type:e,value:t,postData:s}})),document.dispatchEvent(new CustomEvent("tsf-updated-block-editor-"+e,{detail:{type:e,value:t}})),n._data(document,"events")?.["tsf-updated-gutenberg-"+e]&&tsf.deprecatedFunc('jQuery event "tsf-updated-gutenberg"',"5.1.0",`JS Event "tsf-updated-block-editor" or "tsf-updated-block-editor-${e}"`),n(document).trigger("tsf-updated-gutenberg-"+e,[t])}function f(){var e=wp.data.subscribe;e(tsfUtils.debounce(l,500)),e(tsfUtils.debounce(o,300)),e(i),tsfTT.addBoundary(document.getElementById("tabs-1-edit-post/document-view")),document.dispatchEvent(new CustomEvent("tsf-subscribed-to-gutenberg"))}return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",f)}},{triggerUpdate:b})})(jQuery),window.tsfGBC.load();