"use strict";window.tsfPTLE=function(){function a(a,b){return h[a]?.i18n[b]||""}function b(a,b){if(!window.wp||"function"!=typeof window.wp.template)return"";const c=window.wp.template(a);return"function"==typeof c?c(b):""}function c(a,b){document.dispatchEvent(new CustomEvent("tsf-updated-primary-term",{detail:{id:a,taxonomy:b}}))}function d(a,b){const c=()=>document.querySelector("bulk"===b?`#bulk-edit .${a}-checklist`:`#edit-${b} .${a}-checklist`),d=()=>[...c().querySelectorAll("input[type=checkbox]")].sort((c,a)=>c.value-a.value),e=()=>d().filter(a=>a.checked&&!a.indeterminate);return{getWrap:c,getInputs:d,getInputsChecked:e,getInputsCheckedValues:()=>e().map(a=>+a.value),subscribe:a=>{const b=()=>a(),e=()=>{d().forEach(a=>{a.addEventListener("change",b)})};new MutationObserver(()=>{e(),b()}).observe(c(),{childList:!0}),e(),b()}}}function e(a,b){const d=`autodescription-quick[primary_term_${a}]`,e=()=>document.getElementById(d),f=()=>document.getElementById(`edit-${b}`),g=()=>+(e()?.value??0),h=(b,d)=>(b=+b,e().value=b,c(b||+d,a),b);return{get:g,set:h,revalidate:a=>{const b=g();return a.includes(b)?b:h(a?.[0]||0)},registerPostField:a=>{const b=f();if(!b)return;let c=e();if(c||(b.insertAdjacentHTML("beforeend",`<input type="hidden" id="${d}" name="${d}" value="0">`),c=e()),c&&void 0!==a){const b=+a;c.value=isNaN(b)?0:b}},isPostFieldRegistered:()=>!!e()}}function f(a){const b=`autodescription-bulk[primary_term_${a}]`,d=()=>document.getElementById(b),e=()=>document.getElementById("bulk-edit"),f=()=>+(d()?.value??0),g=(b,e)=>(b=+b,d().value=b,c(b||+e,a),b);return{get:f,set:g,revalidate:a=>{const b=f();return a.includes(b)?b:g(a?.[0]||0)},registerPostField:a=>{const c=e();if(!c)return;let f=d();if(f||(c.insertAdjacentHTML("beforeend",`<input type="hidden" id="${b}" name="${b}" value="0">`),f=d()),f&&void 0!==a){const b=+a;f.value=isNaN(b)?0:b}},isPostFieldRegistered:()=>!!d()}}const g=tsfPTL10n,h=g.taxonomies;return Object.assign({_prepareQuickEditTerms:function(c,f){if(!Object.keys(h).length)return;const g=a=>+(f?.[`primary_term_${a}`]?.value??0)||0,i=f=>{const h=e(f,c),i=d(f,c),j=`tsf-pt-le-${f}-${c}`,k=`${j}-select`;let l=!1;const m=i.getWrap(),n=g(f),o=()=>{const a=document.createElement("option"),b=document.getElementById(k);b.innerHTML="",b.append(...i.getInputsChecked().map(b=>{const c=a.cloneNode();return c.value=b.value,c.label=tsf.decodeEntities(b.parentElement.textContent.trim()),c})),tsf.selectByValue(b,`${h.get()}`)},p=()=>{let c=document.getElementById(k);if(!c){const d=b("tsf-primary-term-selector-quick",{wrapId:j,selectId:k,selectName:k,i18n:{selectPrimary:a(f,"selectPrimary")}});d.length&&m.insertAdjacentHTML("afterend",d),c=document.getElementById(k),c?.addEventListener("change",a=>{h.set(a.target.value)})}return c&&(l=!0),c};i.subscribe(()=>{1<i.getInputsChecked().length?(!l&&(l=!0,p()),o(),h.revalidate(i.getInputsCheckedValues())):(l&&(document.getElementById(j)?.remove(),l=!1),h.set(0,i.getInputsChecked()[0]?.value||i.getInputs()[0]?.value||n||0))})};for(const a in h)if(d(a,c).getWrap()){const b=e(a,c);b.registerPostField(g(a)),b.isPostFieldRegistered()&&i(a)}},_prepareBulkEditTerms:function(){const c=c=>{const e=d(c,"bulk"),g=f(c),h=e.getWrap(),i=`tsf-pt-le-${c}-bulk`,j=`${i}-select`;let k=!1;const l=()=>{let d=document.getElementById(j);if(!d){const e=b("tsf-primary-term-selector-bulk",{wrapId:i,selectId:j,selectName:j,i18n:{selectPrimary:a(c,"selectPrimary")}});e.length&&h.insertAdjacentHTML("afterend",e),d=document.getElementById(j),d?.addEventListener("change",a=>{"nochange"===a.target.value||g.set(a.target.value)})}return d&&(k=!0),d},m=()=>{const a=document.createElement("option"),b=document.getElementById(j),c=b.value;b.innerHTML="";const d=a.cloneNode();d.value="nochange",d.label="\u2014 No Change \u2014",b.appendChild(d);let f=!1;b.append(...e.getInputsChecked().map(b=>{const d=a.cloneNode();return d.value=b.value,d.label=tsf.decodeEntities(b.parentElement.textContent.trim()),b.value===c&&(f=!0),d}));const g=f?c:"nochange";tsf.selectByValue(b,g)};e.subscribe(()=>1<e.getInputsChecked().length?(k||(k=!0,l()),void m()):void(k&&(document.getElementById(i)?.remove(),k=!1)))};for(const a in h)if(d(a,"bulk").getWrap()){const b=f(a);b.registerPostField(),b.isPostFieldRegistered()&&c(a)}}},{l10n:g})}();
