'use strict';window.tsf=function(a){const b="undefined"!=typeof tsfL10n&&tsfL10n;let c,d={"<":"&#x3C;",">":"&#x3E;","\\":"&#x5C;"};const e=a=>a?.length?(c||=new DOMParser,c.parseFromString(a.replace?.(/[<>\\]/g,a=>d[a])||"","text/html").documentElement.textContent):"",f=a=>{if(!a?.length)return"";let b={"&":"&#x26;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","\\":"&#x5C;","/":"&#x2F;"};return a.replace?.(/[&<>"'\\\/]/g,a=>b[a])||""},g=()=>{let b=a(".postbox[id^=\"autodescription-\"], .postbox#tsf-inpost-box");a(document).on("postbox-toggled",(c,d)=>{if(!d||!b.is(d))return;d=a(d);let e=d.find("input:invalid, select:invalid, textarea:invalid");e.length&&setTimeout(()=>{if(d.is(":hidden")){let b=d.attr("id");a(`#${b}-hide`).trigger("click.postboxes")}else if(d.hasClass("closed"))d.find(".hndle, .handlediv").first().trigger("click.postboxes");else{let b=e.get(0);a(b).is(":visible")&&b.reportValidity()}})})},h=()=>{const b=b=>{const c=a(b.target).closest(".tsf-notice").first(),d=b.target.dataset&&b.target.dataset.key||void 0,e=b.target.dataset&&b.target.dataset.nonce||void 0;c.fadeTo(100,0,()=>{c.slideUp(100,()=>{c.remove()})}),d&&e&&wp.ajax.post("tsf_dismiss_notice",{tsf_dismiss_key:d,tsf_dismiss_nonce:e})},c=()=>{document.querySelectorAll(".tsf-dismiss").forEach(a=>{a.addEventListener("click",b)})};document.body.addEventListener("tsf-reset-notice-listeners",c),c()};let i=new Set,j=!1;const k=(a,b)=>{i.add([a,b]),j||(document.body.addEventListener("tsf-interactive",l),j=!0)},l=()=>{i.forEach(([a,b])=>{a.dispatchEvent(new Event(b))})};let m;const n=()=>{clearTimeout(m),m=setTimeout(()=>document.body.dispatchEvent(new CustomEvent("tsf-reset-notice-listeners")),100)};let o,p,q=!1;const r=50,s=()=>{clearTimeout(o),o=setTimeout(()=>{q=!1},r),q?(clearTimeout(p),p=setTimeout(s,r)):(q=!0,dispatchEvent(new CustomEvent("tsf-resize")))};let t=!1;const u=()=>{t||(t=!0,document.body.dispatchEvent(new CustomEvent("tsf-interactive")))},v=()=>{document.body.dispatchEvent(new CustomEvent("tsf-ready"))},w=()=>{document.body.dispatchEvent(new CustomEvent("tsf-onload"))};let x=!1;const y=()=>{x||(document.removeEventListener("DOMContentLoaded",y),document.removeEventListener("load",y),w(),g(),h(),v(),x=!0,document.addEventListener("load",u),setTimeout(u,100))};return Object.assign({load:()=>{"complete"!==document.readyState&&("loading"===document.readyState||document.documentElement.doScroll)?(document.addEventListener("DOMContentLoaded",y),document.addEventListener("load",y)):setTimeout(y()),window.addEventListener("resize",s)}},{stripTags:a=>a.length&&a.replace(/(<([^>]+)?>?)/ig,"")||"",decodeEntities:e,escapeString:f,ampHTMLtoText:a=>a.replace(/&amp;|&#x0{0,3}26;|&#38;/gi,"&"),sDoubleSpace:a=>a.replace(/\s{2,}/g," "),sSingleLine:a=>a.replace(/[\x0A\x0B\x0C\x0D]/g," "),sTabs:a=>a.replace(/\x09/g," "),coalesceStrlen:a=>a?.length?a:null,getStringLength:a=>{let b,c=0;return a.length&&(b=document.createElement("span"),b.innerHTML=f(a).trim(),c=b.childNodes?.[0].nodeValue.length||0),+c},selectByValue:(a,b)=>{if(!a instanceof HTMLSelectElement)return;let c;for(let d=0;d<a.options.length;++d)if(b==a.options[d].value){c=d;break}if(void 0===c)for(let d=0;d<a.options.length;++d)if(b==a.options[d].innerHTML){c=d;break}void 0!==c&&(a.selectedIndex=c)},convertJSONResponse:a=>{let b=a&&a.json||void 0,c=1===b;if(!c){let b=a;try{a=JSON.parse(a),c=!0}catch(a){c=!1}c||(a=b)}return a},setAjaxLoader:b=>{a(b).toggleClass("tsf-loading")},unsetAjaxLoader:(b,c)=>{let d="tsf-success",e=2500;c||(d="tsf-error",e=5e3),a(b).removeClass("tsf-loading").addClass(d).fadeOut(e)},resetAjaxLoader:b=>{a(b).stop(!1,!0).empty().prop("class","tsf-ajax").show()},deprecatedFunc:(a,b,c)=>{b=b?` since The SEO Framework ${b}`:"",c=c?` Use ${c} instead.`:"",void 0},triggerNoticeReset:n,dispatchAtInteractive:k},{l10n:b})}(jQuery),window.tsf.load();
