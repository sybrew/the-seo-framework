'use strict';window.tsfLe=function(){let a;const b=()=>{clearTimeout(a),a=setTimeout(()=>{document.dispatchEvent(new Event("tsfLeUpdated"))},50)},c=()=>{tsfTT?.triggerReset()},d=a=>{const b=JSON.parse(document.getElementById(`tsfLeData[${a}]`)?.dataset.le||0)||{};for(const c in b){let a=document.getElementById("autodescription-quick[%s]".replace("%s",c));if(a)if(b[c].isSelect){tsf.selectByValue(a,b[c].value);let d=a.querySelector("[value=\"0\"]");d&&(d.innerHTML=d.innerHTML.replace("%s",tsf.decodeEntities(b[c].default)))}else a.value=tsf.decodeEntities(b[c].value)}},e=a=>d(a),f=a=>JSON.parse(document.getElementById(`tsfLePostData[${a}]`)?.dataset.lePostData||0)||{},g=a=>{let b=(a.originalEvent||a).target,c=b.dataset.tsfTitleId,d="",e="public";switch(e="keep_private"===b.name?b.checked?"private":"public":b.value&&b.value.length?"password":"public",e){case"password":d=tsfTitle.protectedPrefix;break;case"private":d=tsfTitle.privatePrefix;break;default:case"public":d="";}tsfTitle.updateStateOf(c,"prefixValue",d)},h=a=>{const b=(a.originalEvent||a).target,c=b.dataset?.tsfTitleId,d=b.value?.trim()||"",e=b.dataset?.termPrefix?.trim()||"";let f=tsfTitle.stripTitleTags?tsf.stripTags(d):d;f||=tsfTitle.untitledTitle,e.length&&(window.isRtl?f=`${f} ${e}`:f=`${e} ${f}`),f=tsf.escapeString(tsf.decodeEntities(f.trim())),tsfTitle.updateStateOf(c,"defaultTitle",f)},i=a=>{const b="autodescription-quick[doctitle]",c=document.getElementById(b);tsfTitle.setInputElement(c);const d=JSON.parse(document.getElementById(`tsfLeTitleData[${a}]`)?.dataset.leTitle||0);d&&(tsfTitle.updateStateOf(b,"allowReferenceChange",!d.refTitleLocked),tsfTitle.updateStateOf(b,"defaultTitle",d.defaultTitle.trim()),tsfTitle.updateStateOf(b,"addAdditions",d.addAdditions),tsfTitle.updateStateOf(b,"additionValue",d.additionValue.trim()),tsfTitle.updateStateOf(b,"additionPlacement",d.additionPlacement));let e=document.getElementById(`edit-${a}`);e&&(e.querySelectorAll("[name=post_password]").forEach(a=>{a.dataset.tsfTitleId=b,a.addEventListener("input",g),a.dispatchEvent(new CustomEvent("input"))}),e.querySelectorAll("[name=keep_private]").forEach(a=>{a.dataset.tsfTitleId=b,a.addEventListener("click",g),a.dispatchEvent(new CustomEvent("click"))}),e.querySelectorAll("[name=post_title]").forEach(c=>{c.dataset.tsfTitleId=b,f(a).isFront||(c.addEventListener("input",h),c.dispatchEvent(new CustomEvent("input")))}),e.querySelectorAll("[name=name]").forEach(a=>{a.dataset.tsfTitleId=b,a.dataset.termPrefix=d.termPrefix||"",a.addEventListener("input",h),a.dispatchEvent(new CustomEvent("input"))})),tsfTT?.triggerReset()},j=a=>{const b="autodescription-quick[description]",c=document.getElementById(b);tsfDescription.setInputElement(c);const d=JSON.parse(document.getElementById(`tsfLeDescriptionData[${a}]`)?.dataset.leDescription||0);d&&(tsfDescription.updateStateOf(b,"allowReferenceChange",!d.refDescriptionLocked),tsfDescription.updateStateOf(b,"defaultDescription",d.defaultDescription.trim())),tsfTT.triggerReset()},k=()=>{document.addEventListener("tsfLeDispatchUpdate",b),document.addEventListener("tsfLeUpdated",c)},l=()=>{let a,b;a=window.inlineEditPost?.edit,a&&(window.inlineEditPost.edit=function(b){let c=a.apply(this,arguments);return("object"==typeof b&&(b=window.inlineEditPost?.getId(b)),!b)?c:(d(b),i(b),j(b),window.tsfC?.resetCounterListener(),c)}),b=window.inlineEditTax?.edit,b&&(window.inlineEditTax.edit=function(a){let c=b.apply(this,arguments);return("object"==typeof a&&(a=window.inlineEditTax?.getId(a)),!a)?c:(e(a),i(a),j(a),window.tsfC?.resetCounterListener(),c)})};return{load:()=>{document.body.addEventListener("tsf-onload",k),document.body.addEventListener("tsf-onload",l)}}}(),window.tsfLe.load();
